<mvc:View
  controllerName="fbtool.controller.FeedbackList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page title="Feedback List">
    <headerContent>
      <Button icon="sap-icon://nav-back" text="Back" press="onBack"/>
    </headerContent>

    <content>
      <VBox class="sapUiSmallMargin">
        <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">

          <Select id="modeSelect"
                  selectedKey="received"
                  change="onModeSelectChange"
                  width="12rem">
            <core:Item key="received" text="Received"/>
            <core:Item key="sent"     text="Sent"/>
          </Select>
        </HBox>

        <List id="fbList"
              items="{ 
                path: 'mainService>/FeedbackSet',
                parameters: {
                  $select: 'FB_ID,FROM_USER_ID,TO_USER_ID,FB_TYPE_ID,PROJ_ID,INPUT_TEXT,SEND_DATE,IS_ANONYMOUS',
                  $orderby: 'SEND_DATE desc'
                }
              }"
              growing="true"
              growingScrollToLoad="true"
              noDataText="No feedback found.">
          <items>
            <ObjectListItem
              title="{mainService>INPUT_TEXT}"
              intro="{ path: 'mainService>SEND_DATE', formatter: '.fmtDate' }">
              <attributes>
                <ObjectAttribute title="From"
                  text="{ path: 'mainService>FROM_USER_ID', formatter: '.fmtUserName' }"/>
                <ObjectAttribute title="To"
                  text="{ path: 'mainService>TO_USER_ID', formatter: '.fmtUserName' }"/>
                <ObjectAttribute title="Type"
                  text="{ path: 'mainService>FB_TYPE_ID', formatter: '.fmtTypeName' }"/>
                <ObjectAttribute title="Project"
                  text="{ path: 'mainService>PROJ_ID', formatter: '.fmtProjName' }"/>
              </attributes>
            </ObjectListItem>
          </items>
        </List>
      </VBox>
    </content>
  </Page>
</mvc:View>