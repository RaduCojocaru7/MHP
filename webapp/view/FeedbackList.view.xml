<mvc:View
  controllerName="fbtool.controller.FeedbackList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  displayBlock="true">

  <Page title="Feedback List">
    <headerContent>
      <Button icon="sap-icon://nav-back" text="Back" press="onBack"/>
    </headerContent>

    <content>
      <VBox class="sapUiSmallMargin">
        <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiSmallMarginBottom">

          <!-- Dropdown Received / Sent -->
          <Select id="modeSelect"
                  selectedKey="received"
                  change="onModeSelectChange"
                  width="12rem">
            <core:Item key="received" text="Received"/>
            <core:Item key="sent"     text="Sent"/>
          </Select>

          <!-- Dacă vrei search, decomentezi în controller onSearch și aici:
          <SearchField id="search" width="50%" placeholder="Search feedback text..."
                       liveChange="onSearch" search="onSearch" clear="onSearch"/>
          -->
        </HBox>

        <List id="fbList"
              items="{ path: 'mainService>/FeedbackSet' }"
              growing="true"
              growingScrollToLoad="true"
              noDataText="No feedback found.">
          <items>
            <ObjectListItem
              title="{mainService>INPUT_TEXT}"
              intro="{ path: 'mainService>SEND_DATE', formatter: '.fmtDate' }">
              <attributes>
                <ObjectAttribute title="From"
                  text="{ path: 'mainService>FROM_USER_ID', formatter: '.fmtUserName' }"/>
                <ObjectAttribute title="To"
                  text="{ path: 'mainService>TO_USER_ID', formatter: '.fmtUserName' }"/>
                <!-- aici afișăm numele tipului, nu ID-ul -->
                <ObjectAttribute title="Type"
                  text="{ path: 'mainService>FB_TYPE_ID', formatter: '.fmtTypeName' }"/>
                <!-- aici afișăm numele proiectului, nu ID-ul -->
                <ObjectAttribute title="Project"
                  text="{ path: 'mainService>PROJ_ID', formatter: '.fmtProjName' }"/>
              </attributes>
            </ObjectListItem>
          </items>
        </List>
      </VBox>
    </content>
  </Page>
</mvc:View>
