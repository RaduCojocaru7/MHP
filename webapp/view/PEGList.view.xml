<mvc:View
  controllerName="fbtool.controller.PEGList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">

  <Page title="My PEG List">
    <headerContent>
      <Button
        text="Back"
        icon="sap-icon://nav-back"
        press="onNavBack"
        type="Transparent"
        class="subtleBtn"/>
    </headerContent>

    <content>
      <!-- Filtru DINAMIC după status (se umple din peg>/statuses) -->
      <Toolbar class="sapUiSmallMarginBottom sapUiTinyMarginTop">
        <Label text="Filter by status:" class="sapUiTinyMarginEnd"/>
        <Select id="statusFilter"
                width="12rem"
                selectedKey="{peg>/selectedStatus}"
                change="onStatusFilterChange"
                items="{peg>/statuses}">
          <core:Item key="{peg>key}" text="{peg>text}" />
        </Select>
      </Toolbar>

      <!-- Lista (gruparea pe status e aplicată din controller prin Sorter) -->
      <List id="pegList"
            items="{peg>/requests}"
            class="sapUiResponsiveMargin sapUiTinyMarginTop"
            growing="true"
            growingScrollToLoad="true">
        <StandardListItem
          title="{peg>title}"
          description="{peg>createdDate}"/>
      </List>
    </content>
  </Page>
</mvc:View>
