<mvc:View
  controllerName="fbtool.controller.PEGList"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core">

  <Page title="PEG List">
    <headerContent>
      <Button
        text="Back"
        icon="sap-icon://nav-back"
        press="onNavBack"
        type="Transparent"
        class="subtleBtn"/>
    </headerContent>

    <content>
      <Toolbar class="sapUiSmallMarginBottom sapUiTinyMarginTop">
        <Label text="Filter by status:" class="sapUiTinyMarginEnd"/>
        <Select id="statusFilter"
                width="12rem"
                selectedKey="{peg>/selectedStatus}"
                change="onStatusFilterChange"
                items="{peg>/statuses}">
          <core:Item key="{peg>key}" text="{peg>text}" />
        </Select>
      </Toolbar>

      <List id="pegList"
            items="{peg>/requests}"
            class="sapUiResponsiveMargin sapUiTinyMarginTop"
            growing="true"
            growingScrollToLoad="true"
            showSeparators="All">
            
        <ObjectListItem
          title="{peg>title}"
          intro="{ path: 'peg>createdDate', formatter: '.formatDateOnly' }">
          <attributes>
            <ObjectAttribute 
              text="{
                parts: [
                  'peg>requesterName',
                  'peg>managerName'
                ],
                formatter: '.formatFromToDisplay'
              }"/>
            <ObjectAttribute 
              title="Project"
              text="{peg>projectName}"/>
          </attributes>
        </ObjectListItem>

      </List>
    </content>
  </Page>
</mvc:View>